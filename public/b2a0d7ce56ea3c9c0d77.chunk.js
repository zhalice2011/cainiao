(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1240:function(e,t,n){var r=n(1241),a=n(26),o="string"==typeof r?[[e.i,r,""]]:r;(t=e.exports=r.locals||{})._getContent=function(){return o},t._getCss=function(){return""+r},t._insertCss=function(e){return a(o,e)}},1241:function(e,t,n){(t=e.exports=n(25)(!0)).push([e.i,"\n._2Tnki {\n    position: relative;\n    padding: 16px;\n}\n    ._2Tnki ._3MAVa {\n        background: var(--color-grey-000);\n    }\n    ._2Tnki ._3MAVa ._1cEFH {\n            padding: 0 24px 0 18px;\n            height: 56px;\n            min-height: 56px;\n            border-bottom: 1px solid var(--color-grey-400);\n        }\n    ._2Tnki ._3MAVa .NpuYI {\n            padding: 20px 18px;\n            min-height: 0;\n            -webkit-user-select: none;\n               -moz-user-select: none;\n                -ms-user-select: none;\n                    user-select: none;\n        }\n    ._2Tnki rect {\n            fill: none;\n            pointer-events: all;\n            cursor: pointer;\n          }\n    ._2Tnki pre {\n            font-size: 18px;\n          }\n    ._2Tnki line {\n            stroke: #57C47D;\n            stroke-width: 1.5px;\n          }\n    ._2Tnki .string, ._2Tnki .regexp {\n            color: #F35E5E;\n          }\n    ._2Tnki .keyword {\n            color: #00c;\n          }\n    ._2Tnki .comment {\n            color: #777;\n            font-style: oblique;\n          }\n    ._2Tnki .number {\n            color: #369;\n          }\n    ._2Tnki .class, ._2Tnki .special {\n            color: #1181B8;\n          }\n    ._2Tnki a:link, ._2Tnki a:visited {\n            color: steelblue;\n            text-decoration: none;\n          }\n    ._2Tnki a:hover {\n            color: #666;\n          }\n    ._2Tnki .node circle {\n            cursor: pointer;\n            fill: #fff;\n            stroke: #C8CED9;\n            stroke-width: 1.5px;\n          }\n    ._2Tnki .node text {\n            font-size: 12px;\n          }\n    ._2Tnki path.link {\n            fill: none;\n            stroke: #DBDFE7;\n            stroke-width: 2.0px;\n          }\n\n#tree-container .tooltip {\n            position: absolute;\n            padding: 8px;\n            text-align: left;\n            background: #fff;\n            color: #8CA0B3;\n            box-shadow:0px 1px 4px 0px rgba(140,160,179,0.4);\n            border: 0px;\n            border-radius: 4px;\n            pointer-events: none;\n        }\n\n#tree-container .tooltip span {\n                display: inline-block;\n                margin-bottom: 5px;\n            }\n\n\n\n","",{version:3,sources:["TreeView.scss"],names:[],mappings:";AACA;IACI,kBAAkB;IAClB,aAAa;AAmFjB;IAlFI;QACI,iCAAiC;IAYrC;IAXI;YACI,sBAAsB;YACtB,YAAY;YACZ,gBAAgB;YAChB,8CAA8C;QAClD;IACA;YACI,kBAAkB;YAClB,aAAa;YACb,yBAAiB;eAAjB,sBAAiB;gBAAjB,qBAAiB;oBAAjB,iBAAiB;QACrB;IAOC;YACG,UAAU;YACV,mBAAmB;YACnB,eAAe;UACjB;IAEA;YACE,eAAe;UACjB;IAEA;YACE,eAAe;YACf,mBAAmB;UACrB;IAEA;YACE,cAAc;UAChB;IAEA;YACE,WAAW;UACb;IAEA;YACE,WAAW;YACX,mBAAmB;UACrB;IAEA;YACE,WAAW;UACb;IAEA;YACE,cAAc;UAChB;IAEA;YACE,gBAAgB;YAChB,qBAAqB;UACvB;IAEA;YACE,WAAW;UACb;IAEA;YACE,eAAe;YACf,UAAU;YACV,eAAe;YACf,mBAAmB;UACrB;IAEA;YACE,eAAe;UACjB;IAEA;YACE,UAAU;YACV,eAAe;YACf,mBAAmB;UACrB;;AAOF;YACI,kBAAkB;YAClB,YAAY;YACZ,gBAAgB;YAChB,gBAAgB;YAChB,cAAc;YACd,gDAAgD;YAChD,WAAW;YACX,kBAAkB;YAClB,oBAAoB;QAKxB;;AAJI;gBACI,qBAAqB;gBACrB,kBAAkB;YACtB",file:"TreeView.scss",sourcesContent:["\n.container {\n    position: relative;\n    padding: 16px;\n    .content {\n        background: var(--color-grey-000);\n        .header {\n            padding: 0 24px 0 18px;\n            height: 56px;\n            min-height: 56px;\n            border-bottom: 1px solid var(--color-grey-400);\n        }\n        .body {\n            padding: 20px 18px;\n            min-height: 0;\n            user-select: none;\n        }\n    }\n\n\n\n\n    :global {\n         rect {\n            fill: none;\n            pointer-events: all;\n            cursor: pointer;\n          }\n\n          pre {\n            font-size: 18px;\n          }\n\n          line {\n            stroke: #57C47D;\n            stroke-width: 1.5px;\n          }\n\n          .string, .regexp {\n            color: #F35E5E;\n          }\n\n          .keyword {\n            color: #00c;\n          }\n\n          .comment {\n            color: #777;\n            font-style: oblique;\n          }\n\n          .number {\n            color: #369;\n          }\n\n          .class, .special {\n            color: #1181B8;\n          }\n\n          a:link, a:visited {\n            color: steelblue;\n            text-decoration: none;\n          }\n\n          a:hover {\n            color: #666;\n          }\n\n          .node circle {\n            cursor: pointer;\n            fill: #fff;\n            stroke: #C8CED9;\n            stroke-width: 1.5px;\n          }\n\n          .node text {\n            font-size: 12px;\n          }\n\n          path.link {\n            fill: none;\n            stroke: #DBDFE7;\n            stroke-width: 2.0px;\n          }\n\n    }\n}\n\n:global {\n    #tree-container {\n        .tooltip {\n            position: absolute;\n            padding: 8px;\n            text-align: left;\n            background: #fff;\n            color: #8CA0B3;\n            box-shadow:0px 1px 4px 0px rgba(140,160,179,0.4);\n            border: 0px;\n            border-radius: 4px;\n            pointer-events: none;\n            span {\n                display: inline-block;\n                margin-bottom: 5px;\n            }\n        }\n    }\n\n}\n\n\n\n"]}]),t.locals={container:"_2Tnki",content:"_3MAVa",header:"_1cEFH",body:"NpuYI"}},1255:function(e,t,n){"use strict";n.r(t);n(67),n(65),n(52),n(156),n(157),n(68),n(69),n(66),n(101),n(166),n(53);var r=n(7),a=n.n(r),o=n(0),i=n.n(o),c=n(1),l=n.n(c),s=n(8),p=n.n(s),u=n(471),A=n.n(u),d=n(477),f=n.n(d),m=n(163),g=n(729),h=n(472),b=n(485),y=n(516),x=n(12);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var E=function(){var e=y.b.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{color:y.c[e.value]})}));return i.a.createElement("div",{className:"row-flex-center",style:{marginBottom:18,color:Object(h.b)("grey-700")}},i.a.createElement("span",{style:{marginRight:10}},Object(x.c)({id:"TASK_STATUS",cn:"任务状态",en:"Tasks status"}),":"),e.map((function(e){return e.color?i.a.createElement("div",{key:e.id,className:"row-flex-center",style:{marginRight:10}},i.a.createElement("div",{style:{width:10,height:10,background:e.color,marginRight:4}}),Object(x.c)(e)):null})))},C=n(486);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var O=function(){var e=C.c.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{color:C.d[e.value]})}));return i.a.createElement("div",{className:"row-flex-center",style:{marginBottom:18,color:Object(h.b)("grey-700")}},i.a.createElement("span",{style:{marginRight:10}},Object(x.c)({id:"NODE_TYPE",cn:"节点类型",en:"Node Type"}),":"),e.map((function(e){return e.color?i.a.createElement("div",{key:e.color,className:"row-flex-center",style:{marginRight:10}},i.a.createElement("div",{style:{width:10,height:10,background:e.color,marginRight:4,borderRadius:"50%"}}),Object(x.c)(e)):null})))},k=(n(511),n(158),n(476),n(598),n(498),n(1239)),j=n(481),w=20,T=120,Y=20,_=20,D=function(e){var t='<div style="text-align: left;">';return t+="<span>id : "+e.id+"</span></br>",t+="<span>host : "+e.host+"</span></br>",t+="<span>name : "+e.name+"</span></br>",t+="<span>state : "+(e.state?Object(x.c)(y.b.find((function(t){return t.value===e.state}))):"-")+"（"+e.state+"）</span></br>",e.type&&(t+="<span>type : "+e.type+"</span></br>"),t+="<span>startTime : "+(e.startTime?Object(j.b)(e.startTime):"null")+"</span></br>",t+="<span>endTime : "+(e.endTime?Object(j.b)(e.endTime):"null")+"</span></br>",t+="<span>duration : "+e.duration+"</span></br>",t+="</div>"},I=function(e){return 0===e?355:1===e?405+20*e:50+20*e+12*(e-1)+355};var N=function(e){var t=0;return function e(n){for(var r=0;r<n.length;r+=1){var a=n[r],o=a.instances;t=Math.max(o.length,t),a.children&&e(a.children)}}([].concat(e)),t},S=function(e){var t=document.getElementById("tree-wrap").offsetWidth||1e3;return Math.max(t-60,32*e+500)};function P(e){var t=e.data,n=e.containerWidth,r=e.maxNodeLen;return setTimeout((function(){t.y0=0,t.x0=400,t.containerWidth=n,function(e,t){var n=k.layout.tree(),r=n(e),a=6;r.forEach((function(e){e.depth>a&&(a=e.depth)}));var o=e.containerWidth-T-_,i=31*r.length-w-Y;n.size([i,o]);var c=k.svg.diagonal().projection((function(e){return[e.y,e.x]})),l=null,s=k.select("svg#d3-tree").attr("width",o+T+_).attr("height",i+w+Y).append("svg:g").attr("transform","translate("+_+", "+w+")"),p=s.append("g").attr("class","vertical-bg-g").attr("transform",(function(){return"translate(10,0)"})).append("rect").attr("class","vertical-bg").attr("y",-10).attr("width",30).attr("height",1e3),u=k.select("#tree-container").append("div").attr("class","tooltip").style("opacity",0),A=function(){u.transition().delay(100).duration(600).style("opacity",0).style("pointer-events","none")},d=0;!function r(o){var i=k.event&&k.event.altKey?5e3:500,f=n.nodes(e);f.forEach((function(e,t){e.y=30*e.depth,e.x=30*t}));var m=s.selectAll("g.node").data(f,(function(e){return e.id||(e.id=++d)})),g=m.enter().append("svg:g").attr("class","node").attr("transform",(function(){return"translate("+o.y0+", "+o.x0+")"})).on("click",(function(e){!function(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null)}(e),r(e);var t=e.children?1e3:30*e.depth+30;p[0][0].setAttribute("height",t)}));g.append("svg:circle").attr("r",1e-6).style("fill",(function(e){return e._children?"lightsteelblue":"#fff"})).on("mouseover",(function(){this.parentNode.querySelector(".bg").setAttribute("style","fill: #5692D6; fill-opacity: 0.1")})).on("mouseout",(function(){this.parentNode.querySelector(".bg").setAttribute("style","opacity: 0")})),g.append("a").attr("xlink:href",(function(e){return e.url})).append("svg:text").attr("x",15).attr("dy",".35em").attr("text-anchor","start").text((function(e){return e.name})).each((function(e){for(var t=k.select(this),n=60*a-30*e.depth,r=t.node().getComputedTextLength(),o=t.text();r>n-30&&o.length>0;)o=o.slice(0,-1),t.text(o+"..."),r=t.node().getComputedTextLength()})).style("fill",(function(e){return e.free,"#617282"})).style("fill-opacity",1e-6),g.append("svg:title").text((function(e){return e.description})),g.append("g").attr("transform",(function(){return"translate(10,0)"})).append("rect").attr("class","bg").attr("y",-10).attr("width",(function(e){var n=t>1?50+20*Math.max(0,t-1)+12*Math.max(0,t-2):0;return 60*a-30*e.depth+n})).attr("height",20),g.append("g").attr("class","stateboxes").attr("transform",(function(e){return"translate("+(60*a-e.y)+",0)"})).selectAll("rect").data((function(e){return e.instances.reverse()})).enter().append("rect").attr("class","state").style("fill",(function(e){return e.state&&y.c[e.state]||"#D8D8D8"})).attr("data-toggle","tooltip").attr("rx",2).attr("ry",2).style("shape-rendering","auto").attr("x",(function(e,t){return 0===t?0:32*t+38})).attr("y",-10).attr("width",20).attr("height",20).on("click",(function(){A()})).on("mouseover",(function(e,t){l&&clearTimeout(l),l=null;var n=D(e);u.transition().duration(200).style("opacity",1),u.html(n);var r=u.node(),a=r.offsetHeight,o=r.offsetWidth,i=a>170?75:95;u.style("left",k.event.pageX-200-o/2+"px").style("top",k.event.offsetY+i+"px");var c=I(t);p[0][0].parentNode.setAttribute("transform","translate("+c+",-5)"),p[0][0].setAttribute("style","fill: #5692D6; fill-opacity: 0.1")})).on("mouseout",(function(){A(),l=setTimeout((function(){k.select(".vertical-bg")[0][0].setAttribute("style","opacity: 0")}),500)}));var h=m.transition().duration(i).attr("transform",(function(e){return"translate("+e.y+", "+e.x+")"}));h.select("circle").attr("r",10).style("fill",(function(e){return e.type?C.d[e.type]:"#fff"})).style("stroke",(function(e){return e.type&&C.d[e.type]?"none":"#C8CED9"})),h.select("text").style("fill-opacity",1);var b=m.exit().transition().duration(i).attr("transform",(function(){return"translate("+o.y+", "+o.x+")"})).style("opacity",1e-6).remove();b.select("circle").attr("r",1e-6),b.select("text").style("fill-opacity",1e-6);var x=s.selectAll("path.link").data(n.links(f),(function(e){return e.target.id}));x.enter().insert("svg:path","g").attr("class","link").attr("d",(function(){var e={x:o.x0,y:o.y0};return c({source:e,target:e})})).transition().duration(i).attr("d",c),x.transition().duration(i).attr("d",c),x.exit().transition().duration(i).attr("d",(function(){var e={x:o.x,y:o.y};return c({source:e,target:e})})).remove(),f.forEach((function(e){e.x0=e.x,e.y0=e.y}))}(e)}(t,r)}),0),i.a.createElement("svg",{id:"d3-tree"})}P.propTypes={data:l.a.object,containerWidth:l.a.number,maxNodeLen:l.a.number};var U=P,W=n(491),R=n(1240),F=n.n(R);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=[25,50,75,100],L={id:"NUM_LATEST_TASKS",cn:"最近运行次数",en:"Number of latest tasks"},z={id:"PROCESS_DEFN",cn:"工作流定义",en:"Process Definition"},K={id:"TREE_CHART",cn:"树形图",en:"Tree Chart"};function H(e){A()(F.a);var t=e.match.params,n=t.id,r=void 0===n?170:n,a=t.name,c=void 0===a?"test":a,l=Object(o.useState)(!1),s=l[0],u=l[1],y=Object(o.useState)(null),v=y[0],C=y[1],B=Object(o.useState)(V[0]),k=B[0],j=B[1];Object(o.useEffect)((function(){u(!0),Object(b.o)({processId:r,limit:k}).then((function(e){u(!1),C(e)})).catch((function(){u(!1)}))}),[r,k]);return i.a.createElement("div",{id:"tree-container",className:p()(F.a.container,"column-flex content-h-full")},i.a.createElement(g.b,{title:Object(x.c)({id:"TASK_SCHEDULING",cn:"任务调度",en:"Task Scheduling"}),suffix:i.a.createElement(g.a,{titles:[{name:Object(x.c)(z),url:"/projects/"+Object(W.b)()+"/definition"},{name:Object(x.c)(K)}]})}),i.a.createElement("div",{className:p()(F.a.content,"column-flex flex1")},i.a.createElement("div",{className:p()(F.a.header,"row-flex-center jc-space")},i.a.createElement("span",{className:"gd-weight-bold"},c),i.a.createElement("div",{className:"row-flex-center",style:{color:Object(h.b)("grey-700")}},i.a.createElement("span",{style:{marginRight:20}},Object(x.c)(L),": "),i.a.createElement(f.a,{value:k,style:{width:80},onChange:j},V.map((function(e){return i.a.createElement(d.Option,{value:e,key:e},e)}))))),i.a.createElement("div",{className:p()(F.a.body,"column-flex flex1")},i.a.createElement(O,null),i.a.createElement(E,null),i.a.createElement("div",{id:"tree-wrap",className:"flex1 font-l",style:{padding:"30px 0 0 60px",overflow:"auto"}},function(){if(s)return i.a.createElement(m.a,null);if(!v)return null;var e=N(v),t=S(e),n={height:24,borderBottom:"1px solid #DBDFE7",whiteSpace:"nowrap"},r=20*Math.max(0,e-1)+12*Math.max(0,e-2);return i.a.createElement("div",{style:{width:t||"auto"}},i.a.createElement("div",{className:"row-flex",style:{fontWeight:900,color:"#414958"}},i.a.createElement("span",{className:"no-shrink"},Object(x.c)({id:"PROCESS_S",cn:"工作流结构",en:"Process Structure"})),i.a.createElement("div",{style:{marginLeft:309}},i.a.createElement("div",{style:{marginBottom:22}},Object(x.c)({id:"NODE_TASK_STATUS",cn:"节点任务状态",en:"Node task status"})),e>0&&i.a.createElement("div",{className:"font-m row-flex"},i.a.createElement("div",{style:q({width:20,marginRight:50},n)},i.a.createElement("span",null,"最近")),i.a.createElement("div",{style:q({width:r},n)},i.a.createElement("span",null,"历史运行"))))),i.a.createElement("div",{className:"flex1"},i.a.createElement(U,{data:v,containerWidth:t,maxNodeLen:e})))}()))))}H.propTypes={match:l.a.object};t.default=H}}]);